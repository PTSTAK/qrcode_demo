{% extends "layouts/base.html" %}


{% block title %} Page User {% endblock %} 

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}

<style>

  select.form-control{
    display: inline-block;
    width: 100%;
  }

  .review-form + label  .fa {
    cursor: pointer;
  }
  .review-form + label .fa {
    color: #A9A9A9;
  } 
  .review-form:checked + label .fa,
  .review-form:checked ~ label .fa{ 
    color: #FFB03D;
  }
  .review-form:checked + label:after{
    content: attr(data-label);
    position: absolute;
    font-size: 16px;
    top: 100%;
    left: 50%;
    transform: translate(-50%, 0);
    width: 100%;
    text-align: center;
  }

  .review-form + label  .fa {
    font-size: 40px;
    padding: auto;
    cursor: pointer;
  }
  input[type="checkbox"] + label .fa:before {
    color: #A9A9A9;

  } 
  input[type="checkbox"]:checked + label .fa:before {
    color: #FFB03D;
  } 

  </style>

{% endblock stylesheets %}

{% block content %}

          <div class="row">
            <div class="col-md-12">
              <div class="card">
                <div class="card-header card-header-success">
                  <h4 class="card-title">Edit Profile</h4>
                  <p class="card-category">Complete company profile</p>
                </div>
                <div class="card-body">
                    <form id="page-userid">
                      {% csrf_token %}
                    <div class="row">
                      <div class="col-md-2">
                        <div class="form-group">
                          <label class="bmd-label-floating">UserID</label>
                          <input type="text" class="form-control" name="userid" value="{{ model.userid }}" disabled>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="form-group">
                          <label class="bmd-label-floating">Customer Name</label>
                          <input type="text" class="form-control" name="company_name" value="{{ model.company_name }}" required>
                        </div>
                      </div>
                      <div class="col-md-4">
                        <div class="form-group">
                          <label class="bmd-label-floating">Contract Customer</label>
                          <input type="tel" class="form-control" name="telephone" value="{{ model.telephone }}" required>
                        </div>
                      </div>
                    </div>
                    &nbsp;
                    <div class="row">
                      <div class="col-md-12">
                        <div class="form-group">
                          <label class="bmd-label-floating">Address Customer</label>       
                          <input type="text" class="form-control" name="address" value="{{ model.address }}" required>
                        </div>
                      </div>
                    </div>
                    &nbsp;
                    <div class="row">
                      <div class="col-md-3">
                        <div class="form-group">
                          <label class="bmd-label-floating">Province</label>       
                          <input type="text" class="form-control" name="province" value="{{ model.province }}" required>
                        </div>
                      </div>
                      <div class="col-md-3">
                        <div class="form-group">
                          <label class="bmd-label-floating">District</label>       
                          <input type="text" class="form-control" name="district" value="{{ model.district }}" required>
                        </div>
                      </div>
                      <div class="col-md-3">
                        <div class="form-group">
                          <label class="bmd-label-floating">Sub-district</label>       
                          <input type="text" class="form-control" name="sub_district" value="{{ model.sub_district }}" required>
                        </div>
                      </div>
                      <div class="col-md-3">
                        <div class="form-group">
                          <label class="bmd-label-floating">Postal Code</label>       
                          <input type="text" class="form-control" name="postal_code" value="{{ model.postal_code }}" required>
                        </div>
                      </div>
                      
                      <!-- <div class="col-md-3">
                        <div class="form-group">
                          <label class="bmd-label-static" style="font-size: 12px;">Province</label>
                          <select class="form-control" name="province_id" id="province" required>
                            <option value="">&nbsp; select option &nbsp;</option> 
                            {% for province in select_province %}   
                              <option value="{{province.province}}" id="{{province.key}}">&nbsp; {{province.province}} &nbsp;</option>
                            {% endfor %}
                          </select>
                        </div>
                      </div>
                      <div class="col-md-3">
                        <div class="form-group">
                          <label class="bmd-label-static" style="font-size: 12px;">District</label>
                          <select class="form-control " name="district_id" id="district" required>
                            <option value="">&nbsp; select option &nbsp;</option> 
                            {% for district in select_district %}   
                              <option value="{{district.district}}" data-section="{{district.key}}" id="{{district.district_id}}">&nbsp; {{district.district}}</option>
                            {% endfor %}
                          </select>
                        </div>
                      </div>
                      <div class="col-md-3">
                        <div class="form-group">
                          <label class="bmd-label-static" style="font-size: 12px;">Sub-district</label>
                          <select class="form-control" name="sub_district_id" id="sub_district">
                            <option value="" >&nbsp; select option &nbsp;</option> 
                            {% for sub_district in select_sub_district %}   
                              <option value="{{sub_district.sub_district}}" id="{{sub_district.district_id}}" >&nbsp; {{sub_district.sub_district}}  &nbsp;</option>
                            {% endfor %}
                          </select>
                        </div>
                      </div>
                      <div class="col-md-3">
                        <div class="form-group">
                          <label class="bmd-label-static" style="font-size: 12px;" >Postal Code</label>
                          <select class="form-control" name="postal_code_id" id="postal_code">
                            <option value="" >&nbsp; select option &nbsp;</option> 
                            {% for postcode in select_postcode %}   
                              <option value="{{postcode.postcode}}" id="{{postcode.district_id}}" >&nbsp; {{postcode.postcode}}  &nbsp;</option>
                            {% endfor %}
                          </select>
                        </div>
                      </div> -->
                    </div>
                    &nbsp;
                    <div class="row">
                      <div class="col-md-12">
                        <div class="form-group">
                          <label class="bmd-label-static" style="font-size: 12px;">Comment</label>
                          <div class="form-group">
                            <textarea class="form-control" rows="3"></textarea>
                          </div>
                        </div>
                      </div>
                    </div>
                    &nbsp;
                    <div class="row">
                      <div class="col-md-3">
                        <div class="form-group">
                          <label class="bmd-label-static" style="font-size: 12px;">Apporved By</label>
                            <select class="form-control" name="approve_user" id="approve_user" required>
                              <option value="">&nbsp; select option &nbsp;</option>
                              {% for user in select_user %}   
                              <option value="{{user.name}}">&nbsp; {{user.name}} &nbsp;</option>
                              {% endfor %}
                            </select>
                        </div>
                      </div>
                      <div class="col-md-3 align-self-end">
                        <div class="form-group">
                          <label class="bmd-label-floating">Updated By</label>
                          <input type="date" class="form-control" name="update_by" id="update_by" value="{{ model.update_by }}" required>
                        </div>
                      </div>
                      <div class="col-md-3 align-self-end">
                        <div class="form-group">
                          <label class="bmd-label-floating">Schedule Plan</label>
                          <input type="date" class="form-control" name="schedule_plan" id="schedule_plan" value="{{ model.schedule_plan }}" required>
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col md-2">
                        <div class="form-group">
                          <label class="bmd-label-static" style="font-size: 12px;">Voting Point</label>
                          <div class="rating">
                          <br>
                          <div class="d-sm-inline-flex flex-row-reverse justify-content-center position-relative">
                            <input class="form-check-input d-none review-form" type="radio" name="vote_star" id="rate-5" value="5">
                            <label class="mx-1" for="rate-5" data-label="Excellent"><i class="fa fa-fw fa-star fa-lg"></i></label>
                            <input class="form-check-input d-none review-form" type="radio" name="vote_star" id="rate-4" value="4">
                            <label class="mx-1" for="rate-4" data-label="Good"><i class="fa fa-fw fa-star fa-lg"></i></label>
                            <input class="form-check-input d-none review-form" type="radio" name="vote_star" id="rate-3" value="3">
                            <label class="mx-1" for="rate-3" data-label="Fair"><i class="fa fa-fw fa-star fa-lg"></i></label>
                            <input class="form-check-input d-none review-form" type="radio" name="vote_star" id="rate-2" value="2">
                            <label class="mx-1" for="rate-2" data-label="Poor"><i class="fa fa-fw fa-star fa-lg"></i></label>
                            <input class="form-check-input d-none review-form" type="radio" name="vote_star" id="rate-1" value="1">
                            <label class="mx-1" for="rate-1" data-label="Bad"><i class="fa fa-fw fa-star fa-lg"></i></label>
                          </div>
                        </div>
                        </div>
                      </div>
                    </div>
                  
                    &nbsp;
                    <button type="submit" id="test" class="btn btn-success pull-right">Update Profile</button>
                    <div class="clearfix"></div>
                    </form>
                </div>
              </div>
            </div>
            
          </div>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}
  <script>

    // today
    var now = new Date();
    var day = ("0" + now.getDate()).slice(-2);
    var month = ("0" + (now.getMonth() + 1)).slice(-2);
    var today = now.getFullYear()+"-"+(month)+"-"+(day);

    // add 30 days
    var add = now.setDate(now.getDate() + 7);
    var someDate = new Date(add)
    var dd = ("0" + someDate.getDate()).slice(-2);
    var mm = ("0" + (someDate.getMonth() + 1)).slice(-2);
    var adddate = now.getFullYear()+"-"+(mm)+"-"+(dd);

    $('#update_by').val(today);
    $('#schedule_plan').val(adddate);

    $(document).ready(function() {
      
      // var $select1 = $('#province');
      // var	$select2 = $('#district');
      // var	$select3 = $('#sub_district');
      // var	$select4 = $('#postal_code');
      // var	$options2 = $select2.find('option');
      // var	$options3 = $select3.find('option');
      // var	$options4 = $select4.find('option');

      // $select1.on('change', function(e){
      //     $select2.html(
      //       $options2.filter( 
      //         function() {
      //           return $(this).data('section') == $select1[0].selectedOptions[0].id;
      //           // return $(this).data('section') == $select1[0].selectedOptions[0].value;
      //         })
      //     );
      //     $select2.trigger('change');
      // }).trigger('change');

      // $select2.on('change', function(e) {
      //   $select3.html(
      //     $options3.filter(
      //       function() {
      //         return $(this).attr('id') == $select2[0].selectedOptions[0].id;
      //         // return $(this).val() == $select2[0].selectedOptions[0].value;
      //       }
      //     )
      //   );
      // }).trigger('change');

      // $select2.on('change', function(e) {
      //   $select4.html(
      //     $options4.filter(
      //       function() {
      //         return $(this).attr('id') == $select2[0].selectedOptions[0].id;
      //         //return $(this).val() == $select2[0].selectedOptions[0].value;
      //       }
      //     )
      //   );
      // }).trigger('change');

    var ratingList = $(".rating").find(".stars-container");
    ratingList.each(function(){
      var id = "#" + $(this).attr("id");
      var score = $(this).attr("value");
      var intScore = Math.floor(score);
      
      $(id + ' .star').on('click', function () {
        $(id + ' .star').removeClass('selected');
        $(this).addClass('selected');
        });
    });

  });
  </script>
  <script src="/static/assets/js/core/styles.js"></script>
{% endblock javascripts %}
